<!doctype html>
<html>
  <head>
    <title>Search</title>
  </head>
  <body>
    <body>
        <form id="search-form">
          <input type="text" id="query">
          <button type="submit">Busca</button>
        </form>
          <div id="results"></div>
        <div id="video-container"></div>
        <button id="prev-button" class="paging-button" onclick="previousPage();">Previous Page</button>
            <button id="next-button" class="paging-button" onclick="nextPage();">Next Page</button> 
      </body>
      <script  src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
      <script type="text/javascript">
       var searchField = $("#query"); 
        var q = $("#query").val();
        var playlistId, nextPageToken, prevPageToken;
         $("#search-form").submit(function (e) {
             e.preventDefault();
           //console.log("teste");
             $("#results").html("");
           requestVideoPlaylist(playlistId, prevPageToken)
      
         });
      
      function nextPage() {
      
          requestVideoPlaylist(playlistId, nextPageToken);
         }
      
        // Retrieve the previous page of videos in the playlist.
        function previousPage() {
            requestVideoPlaylist(playlistId, prevPageToken);
         }
      
      
      function requestVideoPlaylist(playlistId, pageToken) {
          var options = {
             part: 'snippet, id',
             q: q,
             playlistId: playlistId,
             maxResults: 10,
             type: 'video',
             key: 'AIzaSyDPMv3p6DN9y28MeRQMJnIcSC-eT5aD-ZE'
          };
      
          if (pageToken !== null){
              options.pageToken = pageToken;
          }
          console.log(options)
          $.get("https://www.googleapis.com/youtube/v3/search",options,
        function (data) {
           // console.log(data);
            nextPageToken = data.nextPageToken;
            prevPageToken = data.prevPageToken;
            //console.log(data.items);  
      
           nextPageToken = data.nextPageToken;
           var nextVis = nextPageToken ? 'visible' : 'hidden';
           $('#next-button').css('visibility', nextVis);
           prevPageToken = data.prevPageToken
           var prevVis = prevPageToken ? 'visible' : 'hidden';
           $('#prev-button').css('visibility', prevVis);
      
          var playlistItems = data.items;
          if (playlistItems) {
            $.each(playlistItems, function(index, item) {
              displayResult(item);
            });
            } else {
            $('#video-container').html('Sorry you have no uploaded videos');
            } 
      
          });
          // Create a listing for a video.
          function displayResult(videoSnippet) {
          console.log(videoSnippet);
           var title = videoSnippet.snippet.title;
           var videoId = videoSnippet.id.playlistId;
           var url = "";
           if (typeof videoSnippet.snippet.thumbnails !== 'undefined') {
              url = videoSnippet.snippet.thumbnails.medium.url;
           }
      
           $('#video-container').append('<p>' + title + ' - ' + videoId + '</p>'+'<img src=\"'+url+'\">');
         }
       }
      
      </script>
  </body>
</html>